
# How to merge 2 dataframes with partial character strings?

i have a dataset that lists several possible genera of plants, and another dataset that lists all the species with their functional forms. I would like to merge these datasets in such a way that IF the genus listed in df2 is found within the SPP column of df1, the merged dataframe will include the functional form associated. ie if a sample is listed in df1 as possibly Poa OR Festuca, and df2 lists the functional form of Poa as Graminoid, the resultant merged dataframe would have all of the data from df1 AND an additional column that says "Graminoid." (also including the other columns such as LifeHistory and Origin would also be fine/helpful)
First Dataframe, containing multiple possible species (subset of first 10 rows):
structure(list(SPP = c("Abies", "Abies lasiocarpa OR Abies grandis", 
"Acer", "Acer OR Acer platanoides", "Agrostis mertensii OR Agrostis exarata OR Poa annua OR Agrostis scabra OR Agrostis stolonifera", 
"Allium schoenoprasum", "Alnus", "Amblystegiaceae", "Amblystegiaceae OR Anomodontaceae OR Pterobryaceae OR Meteoriaceae OR Pterigynandraceae OR Lembophyllaceae OR Hypnum OR Taxiphyllaceae OR Orthostichellaceae OR Hylocomiaceae OR Leucodontaceae OR Miyabeaceae OR Climaciaceae OR Cryphaeaceae OR Calliergonaceae OR Neckeraceae", 
"Andreaeaceae"), comb_S026401.R1 = c(0L, 4713L, 0L, 0L, 0L, 0L, 
0L, 0L, 0L, 0L), comb_S026404.R1 = c(0L, 485L, 0L, 0L, 0L, 0L, 
0L, 0L, 0L, 0L), comb_S026406.R1 = c(0L, 5626L, 0L, 0L, 0L, 0L, 
127L, 0L, 14L, 0L), comb_S026409.R1 = c(0L, 2020L, 0L, 0L, 0L, 
0L, 0L, 0L, 0L, 0L), comb_S026412.R1 = c(0L, 331L, 0L, 0L, 0L, 
0L, 0L, 0L, 0L, 0L), comb_S026413.R1 = c(0L, 1394L, 0L, 0L, 0L, 
0L, 0L, 0L, 0L, 0L), comb_S026414.R1 = c(0L, 21L, 0L, 0L, 0L, 
0L, 0L, 0L, 0L, 0L), comb_S026415.R1 = c(0L, 0L, 0L, 10L, 0L, 
0L, 0L, 0L, 0L, 0L), comb_S026416.R1 = c(0L, 271L, 0L, 0L, 0L, 
0L, 0L, 0L, 0L, 0L), comb_S026419.R1 = c(0L, 0L, 0L, 0L, 0L, 
0L, 0L, 0L, 0L, 0L), comb_S026421.R1 = c(0L, 4689L, 0L, 47L, 
0L, 0L, 0L, 0L, 0L, 0L), comb_S026422.R1 = c(0L, 95L, 0L, 0L, 
0L, 0L, 0L, 0L, 0L, 0L), comb_S026423.R1 = c(0L, 360L, 0L, 0L, 
0L, 0L, 0L, 0L, 0L, 0L), comb_S026427.R1 = c(0L, 666L, 0L, 0L, 
0L, 0L, 0L, 0L, 0L, 0L), comb_S026428.R1 = c(0L, 0L, 0L, 0L, 
0L, 0L, 0L, 0L, 0L, 0L), comb_S026429.R1 = c(0L, 21L, 0L, 0L, 
0L, 0L, 0L, 0L, 0L, 0L), comb_S026431.R1 = c(0L, 1545L, 0L, 9L, 
0L, 0L, 0L, 0L, 0L, 0L), comb_S026430.R1 = c(0L, 322L, 0L, 0L, 
0L, 0L, 0L, 0L, 0L, 0L), comb_S026432.R1 = c(0L, 2878L, 0L, 0L, 
0L, 0L, 0L, 0L, 0L, 0L), comb_S026433.R1 = c(0L, 908L, 0L, 0L, 
0L, 0L, 0L, 0L, 0L, 0L), comb_S026434.R1 = c(0L, 0L, 0L, 0L, 
0L, 0L, 0L, 0L, 0L, 0L), comb_S026435.R1 = c(0L, 1961L, 83L, 
0L, 0L, 0L, 0L, 0L, 0L, 23L), comb_S026438.R1 = c(0L, 1944L, 
0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L), comb_S026440.R1 = c(0L, 1955L, 
0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L), comb_S026444.R1 = c(0L, 3372L, 
0L, 0L, 0L, 11L, 0L, 0L, 0L, 0L), comb_S026447.R1 = c(0L, 0L, 
0L, 0L, 0L, 0L, 34L, 17L, 0L, 0L), comb_S026450.R1 = c(0L, 0L, 
564L, 0L, 0L, 0L, 10L, 0L, 0L, 0L), comb_S026451.R1 = c(0L, 0L, 
0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L), comb_S026453.R1 = c(0L, 2721L, 
0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L), comb_S026456.R1 = c(8L, 10357L, 
0L, 0L, 0L, 0L, 147L, 0L, 21L, 0L), comb_S026457.R1 = c(0L, 89L, 
0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L), comb_S026458.R1 = c(0L, 36L, 
0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L), comb_S026461.R1 = c(0L, 650L, 
0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L), comb_S026462.R1 = c(0L, 3645L, 
0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L), comb_S026463.R1 = c(0L, 22L, 
0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L), comb_S026464.R1 = c(0L, 0L, 
764L, 0L, 0L, 0L, 0L, 0L, 0L, 0L), comb_S026467.R1 = c(0L, 0L, 
0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L), comb_S026466.R1 = c(0L, 0L, 
0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L), comb_S026469.R1 = c(0L, 797L, 
0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L), comb_S026470.R1 = c(0L, 30L, 
0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L), comb_S026471.R1 = c(0L, 6519L, 
0L, 0L, 0L, 0L, 64L, 0L, 0L, 0L), comb_S026473.R1 = c(0L, 26L, 
0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L), comb_S026474.R1 = c(0L, 0L, 
2035L, 11L, 0L, 0L, 0L, 0L, 0L, 0L), comb_S026476.R1 = c(0L, 
1181L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L), comb_S026477.R1 = c(0L, 
53L, 0L, 0L, 10L, 0L, 0L, 0L, 0L, 0L), comb_S026483.R1 = c(0L, 
0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L), comb_S026484.R1 = c(0L, 
170L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L), comb_S026485.R1 = c(0L, 
37L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L), comb_S026488.R1 = c(0L, 
73L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 11L), comb_S026489.R1 = c(0L, 
25L, 0L, 17L, 0L, 0L, 0L, 0L, 0L, 0L), comb_S026490.R1 = c(0L, 
19L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L), comb_S026493.R1 = c(0L, 
3353L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L)), row.names = c(NA, -10L
), class = c("tbl_df", "tbl", "data.frame"))


second dataframe, containing functional classes(subset of first 100 rows):
structure(list(CODE = c("AGOSSP", "ALYALY", "ARABSP", "ARESER", 
"BUPAME", "CALLSP", "CENSTO", "CERNUT", "CIRSCA", "CLAPER", "CLAPUL", 
"CLARUB", "COLGRA", "COLLIN", "COLPAR", "CYNOFF", "DESCSP", "DESSOP", 
"DRABSP", "DRAREP", "EPIBRA", "GALAPA", "GALBIF", "GAYHUM", "GENAMA", 
"GERBIC", "GERVIS", "HOLUMB", "LACSER", "LAMAMB", "LAPRED", "LAPSQU", 
"LOGARV", "MADEXI", "MADISP", "MEDLUP", "MELLIN", "MELOFF", "MICGRA", 
"MINRUB", "MONPAR", "MYOSTR", "OROUNI", "ORTTEN", "PHAFRA", "PHALIN", 
"POLDOU", "POLMIN", "PULDOU", "THLARV", "TRADUB", "TRIAUR", "VERARV", 
"VERTHA", "VERVER", "AVEFAT", "BROARV", "BROBRI", "BROJAP", "BROTEC"
), NameScientific = c("Agoseris sp", "Alyssum alyssoides", "Arabis sp", 
"Arenaria serpyllifolia", "Bupleurum americanum", "Callitriche sp", 
"Centaurea stoebe", "Cerastium nutans", "Cirsium scariosum", 
"Claytonia perfoliata", "Clarkia pulchella", "Claytonia rubra", 
"Collomia grandiflora", "Collomia linearis", "Collinsia parviflora", 
"Cynoglossum officinale", "Descurainia sp", "Descurainia sophia", 
"Draba sp", "Draba reptans", "Epilobium brachycarpum", "Galium aparine", 
"Galium bifolium", "Gayophytum humile", "Gentianella amarella", 
"Geranium bicknellii", "Geranium viscosissimum", "Holosteum umbellatum", 
"Lactuca serriola", "Lamium amplexicaule", "Lappula redowskii", 
"Lappula squarrosa", "Logfia arvensis", "Madia exigua", "Madia sp", 
"Medicago lupulina", "Melampyrum lineare", "Melilotus officinalis", 
"Microsteris gracilis", "Minuartia rubella", "Montia parvifolia", 
"Myosotis stricta", "Orobanche uniflora", "Orthocarpus tenuifolius", 
"Phacelia franklinii", "Phacelia linearis", "Polygonum douglasii", 
"Polygonum minimum", "Polygonum douglasii", "Thlaspi arvense", 
"Tragopogon dubius", "Trifolium aureum", "Veronica arvensis", 
"Verbascum thapsus", "Veronica verna", "Avena fatua", "Bromus arvensis", 
"Bromus briziformis", "Bromus japonicus", "Bromus tectorum"), 
    Genus = c("Agoseris", "Alyssum", "Arabis", "ARENARIA", "Bupleurum", 
    "Callitiriche", "Centaurea", "Cerastium", "Cirsium", "Claytonia", 
    "Clarkia", "Claytonia", "Collomia", "Collomia", "Collinsia", 
    "Cynoglossum", "Descurainia", "Descurainia", "Draba", "DRABA", 
    "Epilobium", "Galium", "Galium", "Gayophytum", "GENTIANELLA", 
    "GERANIUM", "Geranium", "Holosteum", "Lactuca", "Lamium", 
    "Lappula", "Lappula", "Logfia", "Madia", "MADIA", "Medicago", 
    "Melampyrum", "Melilotus", "Microsteris", "MINUARTIA", NA, 
    "Myosotis", "Orobanche", "ORTHOCARPUS", "Phacelia", "Phacelia", 
    "Polygonum", "POLYGONUM", "Polygonum", "Thlaspi", "Tragopogon", 
    "Trifolium", "Veronica", "Verbascum", "Veronica", "Avena", 
    "BROMUS", "Bromus", "Bromus", "Bromus"), Species = c("sp", 
    "alyssoides", "sp", "SERPYLLIFOLIA", "americanum", "sp", 
    "stoebe", "nutans", "scariosum", "perfoliata", "pulchella", 
    "rubra", "grandiflora", "linearis", "parviflora", "officinale", 
    "sp", "sophia", "sp", "REPTANS", "brachycarpum", "aparine", 
    "bifolium", "humile", "AMARELLA", "BICKNELLII", "viscosissimum", 
    "umbellatum", "serriola", "amplexicaule", "redowskii", "squarrosa", 
    "arvensis", "exigua", "SP", "lupulina", "lineare", "officinalis", 
    "gracilis", "RUBELLA", NA, "stricta", "uniflora", "TENUIFOLIUS", 
    "franklinii", "linearis", "douglasii", "MINIMUM", "douglasii", 
    "arvense", "dubius", "aureum", "arvensis", "thapsus", "verna", 
    "fatua", "ARVENSIS", "briziformis", "japonicus", "tectorum"
    ), Family = c("Asteraceae", "Brassicaceae", "Brassicaceae", 
    "Caryophyllaceae", "Apiaceae", "Callitrichaceae", "Asteraceae", 
    "Caryophyllaceae", "Asteraceae", "Montiaceae", "Onagraceae", 
    "Montiaceae", "Polemoniaceae", "Polemoniaceae", "Plantaginaceae", 
    "Boraginaceae", "Brassicaceae", "Brassicaceae", "Brassicaceae", 
    "Brassicaceae", "Onagraceae", "Rubiaceae", "Rubiaceae", "Onagraceae", 
    "Gentianaceae", "Gerianaceae", "Geraniaceae", "Caryophyllaceae", 
    "Asteraceae", "Lamiaceae", "Boraginaceae", "Boraginaceae", 
    "Asteraceae", "Asteraceae", "Asteraceae", "Fabaceae", "Orobanchaceae", 
    "Fabaceae", "Polemoniaceae", "Caryophyllaceae", NA, "Boraginaceae", 
    "Orobanchaceae", "Scrophulariaceae", "Hydrophyllaceae", "Hydrophyllaceae", 
    "Polygonaceae", "Polygonaceae", "Polygonaceae", "Brassicaceae", 
    "Asteraceae", "Fabaceae", "Plantaginaceae", "Scrophulariaceae", 
    "Plantaginaceae", "Poaceae", "Poaceae", "Poaceae", "Poaceae", 
    "Poaceae"), Form = c("Forb", "Forb", "Forb", "Forb", "Forb", 
    "Forb", "Forb", "Forb", "Forb", "Forb", "Forb", "Forb", "Forb", 
    "Forb", "Forb", "Forb", "Forb", "Forb", "Forb", "Forb", "Forb", 
    "Forb", "Forb", "Forb", "Forb", "Forb", "Forb", "Forb", "Forb", 
    "Forb", "Forb", "Forb", "Forb", "Forb", "Forb", "Forb", "Forb", 
    "Forb", "Forb", "Forb", "Forb", "Forb", "Forb", "Forb", "Forb", 
    "Forb", "Forb", "Forb", "Forb", "Forb", "Forb", "Forb", "Forb", 
    "Forb", "Forb", "Graminoid", "Graminoid", "Graminoid", "Graminoid", 
    "Graminoid"), LifeHistory = c("Annual", "Annual", "Annual", 
    "Annual", "Annual", "Annual", "Annual", "Annual", "Annual", 
    "Annual", "Annual", "Annual", "Annual", "Annual", "Annual", 
    "Annual", "Annual", "Annual", "Annual", "Annual", "Annual", 
    "Annual", "Annual", "Annual", "Annual", "Annual", "Annual", 
    "Annual", "Annual", "Annual", "Annual", "Annual", "Annual", 
    "Annual", "Annual", "Annual", "Annual", "Annual", "Annual", 
    "Annual", "Annual", "Annual", "Annual", "Annual", "Annual", 
    "Annual", "Annual", "Annual", "Annual", "Annual", "Annual", 
    "Annual", "Annual", "Annual", "Annual", "Annual", "Annual", 
    "Annual", "Annual", "Annual"), Origin = c("Native", "Exotic", 
    "Native", "Exotic", "Native", "UNK", "Exotic", "Native", 
    "Native", "Native", "Native", "Native", "Native", "Native", 
    "Native", "Exotic", "UNK", "Exotic", "Native", "Native", 
    "Native", "Native", "Native", "Native", "Native", "Native", 
    "Native", "Exotic", "Exotic", "Exotic", "Native", "Exotic", 
    "Exotic", "Native", "Native", "Exotic", "Native", "Exotic", 
    "Native", "Native", "Native", "Exotic", "Native", "Native", 
    "Native", "Native", "Native", "Native", "Native", "Exotic", 
    "Exotic", "Exotic", "Exotic", "Exotic", "Exotic", "Exotic", 
    "Exotic", "Exotic", "Exotic", "Exotic"), C_Value = c(NA, 
    "0", NA, "0", "5", NA, "0", "4", "5", "3", "4", "4", NA, 
    "4", "3", "0", NA, "0", NA, NA, "4", "3", NA, NA, "4", "3", 
    "4", "0", "0", "1", NA, "1", "0", NA, NA, "0", "6", "0", 
    "3", "5", "5", "0", "4", "4", NA, "3", "4", "5", "4", "0", 
    "0", "0", "0", "0", "1", "1", "1", "1", "0", "0"), X = c("", 
    "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", 
    "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", 
    "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", 
    "", "", "", "", "", "", "", "", "", "", "", "", "", "")), row.names = c(NA, 
60L), class = "data.frame")

I'm very new to r- i've been trying to figure out if some part of fuzzyjoin could work, also using ore simple %in% to try and merge... but generally pretty lost

        